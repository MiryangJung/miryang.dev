---
title: ë©€í‹°í˜ì´ì§€ í¼ì„ ì•„ë¦„ë‹µê²Œ ë§Œë“¤ë©´ì„œ ë©‹ì§€ê²Œ ìœ íš¨ì„± ê²€ì‚¬í•˜ê¸°
date: 2023-12-03
description: ReactHookFormê³¼ Zod ê·¸ë¦¬ê³  shadcn/uië¥¼ ì‚¬ìš©í•˜ì—¬ ë©€í‹°í˜ì´ì§€ í¼ ë§Œë“¤ê¸°
thumbnailUrl: /posts/thumbnail/create-multi-page-form.jpg
tags: ['í”„ë¡ íŠ¸ì—”ë“œ', 'ê³µë¶€', 'ê°œë°œ', 'react', 'nextjs', 'RHF', 'Zod', 'shadcn']
---

## ë©€í‹°í˜ì´ì§€ í¼ì„ ë§Œë“¤ì

ì§€ê¸ˆ íšŒì‚¬ì—ì„œ ë§Œë“œëŠ” ì„œë¹„ìŠ¤ì— `ë©€í‹°í˜ì´ì§€ í¼(ë©€í‹°ìŠ¤í… í¼)`ì´ êµ‰ì¥íˆ ë§ìŠµë‹ˆë‹¤.
ì—¬ê¸°ì„œ ì œê°€ ë§í•˜ëŠ” ë©€í‹°í˜ì´ì§€ í¼ì´ë€ í•œ Form ì•ˆì˜ ì—¬ëŸ¬ Inputì„ ì—¬ëŸ¬ í˜ì´ì§€ì— ê±°ì³ ì…ë ¥ë°›ëŠ” í˜•íƒœë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì´ëŸ¬í•œ í˜•íƒœì˜ í¼ì„ ë§Œë“œëŠ” ë°©ë²•ì€ í¬ê²Œ ë‘ ê°€ì§€ê°€ ìˆëŠ” ê²ƒìœ¼ë¡œ ë¦¬ì„œì¹˜í–ˆìŠµë‹ˆë‹¤.

1. í˜ì´ì§€ë¥¼ ì—¬ëŸ¬ ë‹¨ê³„ë¡œ ë‚˜ëˆˆë‹¤.
2. í•œ í˜ì´ì§€ ì•ˆì—ì„œ ë‹¨ê³„ì— ë”°ë¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°”ê¾¼ë‹¤.

ì €í¬ëŠ” ì›¹ë·°ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì–´ì„œ ì•± ì•ˆì—ì„œ ë°±ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ì´ì „ ë‹¨ê³„ë¡œ ì´ë™ì‹œí‚¤ê¸° ìœ„í•´ 1ë²ˆ ë°©ë²•ë¥¼ ì‚¬ìš©í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.

í† ìŠ¤ì˜ `slash ë¼ì´ë¸ŒëŸ¬ë¦¬` [useFunnel](https://slash.page/ko/libraries/react/use-funnel/readme.i18n/)ê°€ ì •í™•íˆ ì›í•˜ëŠ” ë™ì‘ì„ ì œê³µí•´ì£¼ê³  ìˆì—ˆì§€ë§Œ
ì €í¬ì˜ ìŠ¤íƒì¸ `Next.js 14`ë¥¼ ì§€ì›ì„ í•˜ì§€ ì•Šì•„ ì•„ì‰½ì§€ë§Œ ì‚¬ìš©í•  ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤.

ê·¸ë ‡ê²Œ ì°¾ê²Œëœ ê²ƒì´ `React Hook Form`ì˜ Contextë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ì˜€ìŠµë‹ˆë‹¤.
ì—¬ê¸°ì— ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìœ„í•œ `Zod` ê·¸ë¦¬ê³  ui ì»´í¬ë„ŒíŠ¸ë¡œ `shadcn/ui`ë¥¼ í•©ì³ ì •ë§ ì•„ë¦„ë‹µê³  ë©‹ì§„ í¼ì„ ë§Œë“¤ ìˆ˜ ìˆê²Œ ë˜ì—ˆê³  ì†Œê°œí•˜ê³  ì‹¶ì–´ ê¸€ì„ ì‘ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤.

ì˜ˆì‹œë¡œ íšŒì›ê°€ì… í¼ì„ ë§Œë“¤ì—ˆê³ , í˜ì´ì§€ê°€ ì´ë™ë˜ë©´ì„œ ì…ë ¥ì„ ë°›ê³  ë§ˆì§€ë§‰ í˜ì´ì§€ì—ì„œ Submití•˜ëŠ” ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![multi-page-form](/posts/create-multi-page-form/example.gif)

**ì½”ë“œì™€ ë°ëª¨ í˜ì´ì§€**ê°€ ê¶ê¸ˆí•˜ì‹  ë¶„ë“¤ì€ ê¸€ì˜ ì œì¼ ì•„ë˜ì— **Github Repo** ë§í¬ë¥¼ ë‚¨ê²¨ë‘ì—ˆìŠµë‹ˆë‹¤.

## Zod

[Zod](https://zod.dev/)ëŠ” TypeScriptì—ì„œ ì‚¬ìš©í•˜ëŠ” **ëŸ°íƒ€ì„ ìœ íš¨ì„± ê²€ì‚¬ ë¼ì´ë¸ŒëŸ¬ë¦¬**ì…ë‹ˆë‹¤.  
ì‚¬ìš©ìë¡œë¶€í„° ì…ë ¥ ë°›ì€ í¼ ë°ì´í„°ë“±ì˜ íƒ€ì…ì´ ë³´ì¥ë˜ì§€ ì•ŠëŠ” ê²½ìš°ì— ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì—ëŸ¬ë©”ì‹œì§€ë¥¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•  ìˆ˜ ìˆì–´ Formì— ì‚¬ìš©í•˜ê¸°ì— ì•„ì£¼ ì í•©í•˜ê¸°ë„ í•©ë‹ˆë‹¤.

íšŒì›ê°€ì… í¼ì„ ê°€ì •í•˜ê³  Zodë¡œ Schemaë¥¼ ìƒì„±í•´ë³´ì•˜ìŠµë‹ˆë‹¤.  
ì½”ë“œëŠ” ì•„ë˜ ì¡°ê±´ë“¤ì„ ë§Œì¡±í•©ë‹ˆë‹¤.

- email: email í¬ë§·ì¼ ê²ƒ
- password: 2ì ì´ìƒ, ìˆ«ìì™€ ì˜ë¬¸ìë¥¼ ìµœì†Œí•œ í•˜ë‚˜ì”© í¬í•¨í•  ê²ƒ
- passwordCheck: passwordì™€ ë™ì¼í•  ê²ƒ
- job: nameì´ otherì¼ ê²½ìš° otherì— ê°’ì´ ìˆì„ ê²ƒ

íŠ¹íˆ, *nameì´ otherì¼ ê²½ìš° otherì— ê°’ì´ ìˆì„ ê²ƒ*ê³¼ ê°™ì€ ë³µì¡í•œ ì¡°ê±´ë„ **refine**ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•  ìˆ˜ ìˆì–´ ë§Œì¡±ë„ê°€ ë†’ìŠµë‹ˆë‹¤.

```ts
const signUpFormSchema = z
  .object({
    email: z.string().email({
      message: 'Email format is not valid.'
    }),
    password: z
      .string()
      .regex(
        /^(?=.*[a-zA-Z])(?=.*[0-9]).{2,20}$/,
        'Please enter at least 2 characters that combine numbers.'
      ),
    passwordCheck: z.string(),
    job: z
      .object({
        name: z.string().min(1),
        other: z.string()
      })
      .refine(({ name, other }) => !(name === 'other' && other === ''), {
        message: 'Please enter your job.',
        path: ['other']
      })
  })
  .refine((data) => data.password === data.passwordCheck, {
    path: ['passwordCheck'],
    message: 'Please check the password'
  });
```

## React Hook Form

[React Hook Form](https://www.react-hook-form.com/)ì€ Reactì—ì„œ ì‚¬ìš©í•˜ëŠ” **Form ë¼ì´ë¸ŒëŸ¬ë¦¬**ì…ë‹ˆë‹¤.
í¼ì˜ ìƒíƒœ ê´€ë¦¬ì™€ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì‰½ê²Œ í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤ë‹ˆë‹¤.

ìœ„ì˜ Zodë¡œ ë§Œë“  signUpFormSchemaë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  React Hook Formë§Œì„ ì‚¬ìš©í•œë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

```tsx
import { useForm } from 'react-hook-form';

export default function App() {
  const {
    register,
    handleSubmit,
    formState: { errors }
  } = useForm();
  const onSubmit = (data) => console.log(data);

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input
        type="password"
        {...register('password', {
          required: 'Password is required.',
          minLength: {
            value: 2,
            message: 'Password must have at least 2 characters.'
          },
          pattern: {
            value: /^(?=.*[a-zA-Z])(?=.*[0-9]).{2,20}$/,
            message: 'Please enter at least 2 characters that combine numbers.'
          }
        })}
      />
      {errors.password && <p>{errors.password.message}</p>}
      ...ìƒëµ
    </form>
  );
}
```

`Zod`ì™€ ê°™ì´ ì‚¬ìš©í•˜ë©´ ìœ„ì™€ ê°™ì€ ì½”ë“œë¥¼ Formê³¼ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìœ„í•œ íƒ€ì…ì„ ë¶„ë¦¬í•˜ì—¬ ì‘ì„±í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë”ìš± ì‰½ê³  ê°€ë…ì„± ìˆê²Œ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
const signUpFormSchema = z
  .object({
    password: z
      .string()
      .regex(
        /^(?=.*[a-zA-Z])(?=.*[0-9]).{2,20}$/,
        'Please enter at least 2 characters that combine numbers.'
      ), ...ìƒëµ
  })

<input
  {...register('password')}
  type="password"
  className="border border-gray-300 rounded-md p-2 outline-none"
/>;

{
  errors.password && (
    <span className="text-sm text-rose-500">{errors.password.message}</span>
  );
}
```

ì•„ë˜ë¶€í„°ì˜ ì½”ë“œëŠ” `Zod`ë¡œ ë§Œë“  signUpFormSchemaë¥¼ ê¸°ë°˜ìœ¼ë¡œ `React Hook Form`ì„ ì‚¬ìš©í•œ ì½”ë“œì…ë‹ˆë‹¤.

`resolver`ì— `Zod`ë¡œ ë§Œë“  signUpFormSchemaë¥¼ zodResolverë¥¼ í†µí•´ ë„˜ê²¨ ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•˜ê²Œ ë©ë‹ˆë‹¤.  
ë˜í•œ `Context(FormProvider)`ë¥¼ ì‚¬ìš©í•˜ì—¬ Formì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë©° ì´ë¥¼ ì‚¬ìš©í•´ ë©€í‹°í˜ì´ì§€ í¼ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
import { FormProvider, useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';

const form = useForm<SignUpFormValues>({
  resolver: zodResolver(signUpFormSchema),
  defaultValues,
  mode: 'all'
});

return (
  <FormProvider {...form}>
    <form onSubmit={handleSubmit(onSubmit)}>{children}</form>
  </FormProvider>
);
```

## Input í˜ì´ì§€ ë§Œë“¤ê¸°

useFormContext í›…ì„ ì‚¬ìš©í•˜ì—¬ í¼ì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.  
**register** í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ í¼ í•„ë“œë¥¼ ë“±ë¡í•˜ê³ , **errors** ê°ì²´ë¥¼ í†µí•´ ìœ íš¨ì„± ê²€ì‚¬ ì—ëŸ¬ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

- ì½”ë“œ ì„¤ëª…: "email" í•„ë“œë¥¼ ë“±ë¡í•˜ê³ , ìœ íš¨ì„± ê²€ì‚¬ ì—ëŸ¬ê°€ ìˆë‹¤ë©´ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

ë©€í‹°í˜ì´ì§€ì´ë¯€ë¡œ ë‹¤ìŒ í˜ì´ì§€ë¡œ ë„˜ì–´ê°€ê¸° ì „ì— í•´ë‹¹ í˜ì´ì§€ì˜ Inputì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•´ì•¼í•˜ê³ ,  
ì´ëŠ” **trigger** í•¨ìˆ˜ë¡œ í•´ë‹¹ í•„ë“œë§Œì„ ê²€ì‚¬í•˜ê²Œ ë©ë‹ˆë‹¤.

- ì½”ë“œ ì„¤ëª…: "email" í•„ë“œì˜ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì‹¤í–‰í•˜ê³ , ìœ íš¨í•˜ë‹¤ë©´ ë‹¤ìŒ í˜ì´ì§€("/signup/password")ë¡œ ì´ë™í•©ë‹ˆë‹¤.

```tsx
  const router = useRouter();
  const {
    register, formState: { errors }, trigger
  } = useFormContext<SignUpFormValues>();

  const onClickNext = async () => {
    const isValid = await trigger("email");
    if (isValid) {
      router.push("/signup/password");
    }
  };

  return (
      <input
        {...register("email")}
        type="email"
        inputMode="email"
        className="border border-gray-300 rounded-md p-2 outline-none"
      />

      {errors.email && (
        <span className="text-sm text-rose-500">{errors.email.message}</span>
      )}

      <Button type="button" onClick={onClickNext} className="mt-5">
        Next
      </Button>
  );
```

## Shadcn/ui

[shadcn/ui](https://ui.shadcn.com)ëŠ” `Radix UI` ì™€ `Tailwind CSS`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ **UI ì»´í¬ë„ŒíŠ¸ ëª¨ìŒ**ì…ë‹ˆë‹¤.

- ê³µì‹ ë¬¸ì„œ ì„¤ëª…: This is NOT a component library. It's a collection of re-usable components that you can copy and paste into your apps.

ì €í¬ íšŒì‚¬ëŠ” ì›¹ ì ‘ê·¼ì„±ì´ ë³´ì¥ë˜ê³ , ê³µí†µëœ ì»´í¬ë„ŒíŠ¸ ì‹œìŠ¤í…œì„ ì‰½ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆì„ ë¿ë”ëŸ¬ ì»¤ìŠ¤í„°ë§ˆì´ì§•ë„ ì‰½ê¸° ë•Œë¬¸ì— `shadcn/ui`ë¥¼ ì ê·¹ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.  
ê·¸ë¦¬ê³  ì œê³µí•˜ëŠ” Form ì»´í¬ë„ŒíŠ¸ê°€ **React Hook Formì„ Wrap**í•˜ê³  ìˆê³  ì—ëŸ¬ ë©”ì‹œì§€ ì¶œë ¥, ì—ëŸ¬ì— ë”°ë¥¸ ìŠ¤íƒ€ì¼ë§ ë“±ë„ ì„¤ì •ë˜ì–´ ìˆì–´ ê°™ì´ ì‚¬ìš©í•˜ë©´ ë”ìš± í¸ë¦¬í•´ì§‘ë‹ˆë‹¤.

```tsx
<FormField
  control={control}
  name="email"
  render={({ field }) => (
    <FormItem>
      <FormLabel className="text-2xl font-bold">Please enter email</FormLabel>
      <FormControl>
        <Input
          placeholder="miryang.dev@gmail.com"
          inputMode="email"
          {...field}
        />
      </FormControl>
      <FormMessage />
    </FormItem>
  )}
/>
```

![email-input-shacn](/posts/create-multi-page-form/email-input-shacn.gif)

## ë§ˆë¬´ë¦¬

`React Hook Form`ì€ Formì˜ ìƒíƒœ ê´€ë¦¬ì™€ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì‰½ê²Œ í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ê³ ,  
`Zod`ëŠ” Formì˜ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìœ„í•œ íƒ€ì…ì„ ë¶„ë¦¬í•˜ì—¬ ê°€ë…ì„± ì¢‹ê²Œ ì‘ì„±í•  ìˆ˜ ìˆê²Œ í•´ì£¼ê³ ,  
`shadcn/ui`ëŠ” ë”ìš± ì‰½ê²Œ í¼ì„ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

ê¸°ìˆ  ë°œì „ ë§Œì„¸! ğŸ‰

- Github Repo
  - [RHF + Zod + shadcn/ui](https://github.com/MiryangJung/multi-page-form-demo)
  - [RHF + Zod](https://github.com/MiryangJung/multi-page-form-demo/tree/without-shadcn)
- [Demo](https://multi-page-form-demo.vercel.app/)

---

- Refer
  - [React Hook Form (+ Zod & TypeScript & Server Errors) - COMPLETE Tutorial](https://youtu.be/u6PQ5xZAv7Q?si=8z0sRD0a4D0qoZDL)

---
title: Supabaseì—ì„œ Kakao Login JS SDKë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
date: 2024-07-07
description: Supabaseì—ì„œ Kakao OIDCë¥¼ ì‚¬ìš©í•´ì„œ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸í•˜ê¸°
thumbnailUrl: /posts/thumbnail/how-to-use-kakao-login-js-sdk-with-supabase.png
tags: ["frontend", "js", "supabase"]
---

ëª‡ ë‹¬ ì „ì— `Supabase`ì— [Kakao OIDC ì§€ì›](https://github.com/supabase/gotrue/pull/1381)ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

- ê¸°ì—¬ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ ì´ ê¸€ [ì˜¤í”ˆì†ŒìŠ¤ Supabaseì— ì´ê²ƒì €ê²ƒ ê¸°ì—¬í•˜ê¸°](https://miryang.dev/blog/contribute-opensource-supabase)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Supabase ì˜¤í”ˆ ì¹´ì¹´ì˜¤í†¡ ë°©ì—ì„œë„ ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œ ë¬¼ì–´ë³´ì‹œëŠ” ê±¸ ì¢…ì¢… ë³´ë©´ì„œ ë„ì›€ì„ ë“œë¦¬ê³  ìˆì—ˆìŠµë‹ˆë‹¤.  
ì´ë²ˆ ì£¼ì— ì•„ë˜ì™€ ê°™ì€ ë¬¸ì˜ ë©”ì¼ì„ ë°›ì•˜ê³ , ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì„ ì—°ê²°í•˜ëŠ” ê°œë°œìë¶„ë“¤ì„ ìœ„í•´ ê¸€ì„ ì‘ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤.

![ë¬¸ì˜ ë©”ì¼](/posts/how-to-use-kakao-login-js-sdk-with-supabase/inquiry-mail.png)

- â—ï¸ í•´ë‹¹ ê¸€ì€ **ì›¹ & ì›¹ë·°** í™˜ê²½ì„ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±í•˜ë©°, ê¸°ìˆ  ìŠ¤íƒì€ ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.
  - `Next.js` v14.2
  - `react-native` v0.72
  - `react-native-webview` v13.3
  - `@supabase/ssr` v0.4
  - `supabase` v1.100

> [ê³µì‹ Supabase ë¬¸ì„œ: Using Kakao Login JS SDK](https://supabase.com/docs/guides/auth/social-login/auth-kakao?queryGroups=framework&framework=nextjs#using-kakao-login-js-sdk)ë„ ê¸°ì—¬í–ˆìœ¼ë‹ˆ ì°¸ê³ í•˜ì„¸ìš”.

## ğŸ”² ì•Œì•„ë³´ê¸°

ì†Œì…œë¡œê·¸ì¸ì„ ìœ„í•´ì„œëŠ” Supabaseì˜ `signInWithOAuth`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```tsx
async function kakaoLogin() {
  await supabase.auth.signInWithOAuth({
    provider: "kakao",
    options: {
      scopes: "name gender birthday birthyear phone_number",
      redirectTo: WEB_URL + "/auth/callback",
    },
  });
}

<button onClick={kakaoLogin}>Kakao Login</button>;
```

í•´ë‹¹ ë°©ì‹ì€ Supabase ë‚´ë¶€ ì½”ë“œë¥¼ ë³´ë©´ [ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ REST API](https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.  
ì¸ê°€ ì½”ë“œë¥¼ ë°›ì•„ì„œ í† í°ì„ ë°›ê³  ë¡œê·¸ì¸ê¹Œì§€ ì „ ê³¼ì •ì´ ë”°ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•  í•„ìš”ì—†ì´ ì²˜ë¦¬ê°€ ë©ë‹ˆë‹¤.

![](/posts/how-to-use-kakao-login-js-sdk-with-supabase/kakao-rest.png)

ì´ë ‡ê²Œ ê¸°ë³¸ OAuth flowë¥¼ ë”°ë¥´ë©´ ê°€ì…/ë¡œê·¸ì¸ ì‘ì—…ì´ ì•”ë¬µì ìœ¼ë¡œ ë‹¤ ì²˜ë¦¬ê°€ ë˜ì–´ì„œ í¸í•˜ê¸´ í•©ë‹ˆë‹¤ë§Œ  
Kakaoì—ì„œ ì œê³µí•˜ëŠ” JS SDKë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì•„ë˜ ì˜ˆì‹œì™€ ê°™ì´ ì›¹ ë¡œê·¸ì¸ì°½ìœ¼ë¡œ ìœ ì €ì—ê²Œ ì œê³µë©ë‹ˆë‹¤.

![](/posts/how-to-use-kakao-login-js-sdk-with-supabase/web-login.gif)

[Kakao JavaScript SDK](https://developers.kakao.com/docs/latest/ko/javascript/getting-started) ê°„í¸ë¡œê·¸ì¸ì„ ì‚¬ìš©í•˜ë©´  
ëª¨ë°”ì¼ ì›¹ì´ë©´ì„œ **ì¹´ì¹´ì˜¤í†¡ì´ ì„¤ì¹˜ë˜ì–´ ìˆëŠ” ê²½ìš° ì¹´ì¹´ì˜¤í†¡ì„ ì‹¤í–‰í•´** ì²˜ë¦¬í•˜ëŠ” ì €í¬ê°€ ì›í•˜ëŠ” ë™ì‘ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.

SDKë¥¼ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ í”Œë¡œìš°ë¥¼ ë”°ë¥´ê²Œ ë©ë‹ˆë‹¤.

![](/posts/how-to-use-kakao-login-js-sdk-with-supabase/kakao-sdk.png)

JavaScript SDKë¥¼ ì‚¬ìš©í•˜ë©´ ì¸ê°€ ì½”ë“œë¥¼ ë°›ê³ , í† í°ì„ ë°›ëŠ” ê³¼ì •ì„ Supabaseì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì§ì ‘ êµ¬í˜„ì„ í•´ì•¼í•©ë‹ˆë‹¤ë§Œ í† í°ì„ ë°›ì•„ë„ Supabaseë¡œ ì „ë‹¬í•  ë°©ë²•ì´ ì—†ìŠµë‹ˆë‹¤.

ê·¸ë˜ì„œ Supabaseì—ëŠ” `signInWithIdToken`ê°€ ìˆìŠµë‹ˆë‹¤. OIDCë¥¼ ì‚¬ìš©í•´ Id Tokenìœ¼ë¡œ ë¡œê·¸ì¸ì„ í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

ê¸°ì¡´ì—ëŠ” Supabaseì—ì„œëŠ” OIDCë¥¼ Google, Apple, LinkedInë§Œ ì§€ì› ì¤‘ì´ì˜€ìœ¼ë‚˜  
ìœ„ì˜ ì´ìœ ë¡œ ì œê°€ Kakaoë„ ì§€ì›í•˜ë„ë¡ ê°œë°œí•˜ì—¬ PRì„ ë„£ì€ ê²ƒì…ë‹ˆë‹¤.

## ğŸ”³ êµ¬í˜„í•˜ê¸°

> ëª¨ë“  ë‚´ìš©ì€ [ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ê³µì‹ ë¬¸ì„œ](https://developers.kakao.com/docs/latest/ko/kakaologin/js)ì—ì„œ ë” ìì„¸íˆ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë¨¼ì €, ì¹´ì¹´ì˜¤ ê°œë°œì ì„¼í„° ëŒ€ì‹œë³´ë“œì—ì„œ OpenID Connectë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤.

![](/posts/how-to-use-kakao-login-js-sdk-with-supabase/activate-oidc.png)

[Kakao SDK for JavaScript](https://developers.kakao.com/docs/latest/ko/javascript/getting-started)ë¥¼ ì°¸ê³ í•˜ì—¬ SDKë¥¼ ì›¹ í˜ì´ì§€ì— í¬í•¨í•˜ê³  ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

JAVASCRIPT_KEYëŠ” ëŒ€ì‹œë³´ë“œì—ì„œ **ì•± ì„¤ì • > ì•± í‚¤ > JavaScriptí‚¤** ì…ë‹ˆë‹¤.

```tsx
<Script
  src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.1/kakao.min.js"
  integrity="..."
  crossOrigin="anonymous"
  onLoad={() => {
    if (!window?.Kakao.isInitialized()) {
      window.Kakao.cleanup();
    }

    window.Kakao.init(process.env.NEXT_PUBLIC_JAVASCRIPT_KEY);
  }}
/>
```

ê·¸ë¦¬ê³  ë¡œê·¸ì¸ë²„íŠ¼ì´ ê°„í¸ ë¡œê·¸ì¸ì„ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

```tsx
function login() {
  if (window?.Kakao?.Auth) {
    window?.Kakao.Auth.authorize({
      redirectUri: { URL },
      // eg. https://miryang.dev/auth/kakao/callback
    });
  }
}

<button onClick={login}>Kakao Login</button>;
```

ìœ„ ì½”ë“œì—ì„œ `redirectUri`ì— í•´ë‹¹í•˜ëŠ” api ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë§Œë“¤ê³  ë¡œì§ì„ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

ì €ëŠ” `Next.js`ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì–´ api routeë¥¼ ì‚¬ìš©í•˜ë‚˜ ì½”ë“œë¥¼ ì¡°ê¸ˆ ë³€ê²½í•´ì„œ `supabase edge function`ì„ ì‚¬ìš©í•˜ì…”ë„ ë  ë“¯í•©ë‹ˆë‹¤.

```ts:/auth/kakao/callback/route.ts
export const dynamic = 'force-dynamic';

const RESTAPI_KEY = process.env.RESTAPI_KEY!;
const CLIENT_SECRET = process.env.CLIENT_SECRET!;

export async function GET(request: Request) {
  const requestUrl = new URL(request.url);

  /* ì¸ê°€ ì½”ë“œ ë°›ê¸° */
  const code = requestUrl.searchParams.get('code');

  if (!code) return NextResponse.redirect(LOGIN);

  /* í† í° ìš”ì²­ */
  const res = await fetch('https://kauth.kakao.com/oauth/token', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8',
    },
    body: new URLSearchParams({
      grant_type: 'authorization_code',
      client_id: RESTAPI_KEY,
      redirect_uri: { URL },
      code,
      client_secret: CLIENT_SECRET,
    }),
  });

  const { id_token } = await res.json();

  /* ID Tokenìœ¼ë¡œ ë¡œê·¸ì¸ ìš”ì²­ */
  const {
    data: { session },
  } = await supabase().auth.signInWithIdToken({
    provider: 'kakao',
    token: id_token,
  });

  if (!session) return NextResponse.redirect(LOGIN);

  return NextResponse.redirect(HOME);
}
```

ê·¸ë¦¬ê³  api ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì¹´ì¹´ì˜¤ ê°œë°œìì„¼í„° ëŒ€ì‹œë³´ë“œ **ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ > Redirect URI**ì— ì¶”ê°€í•´ ì¤ë‹ˆë‹¤.

ìœ„ì™€ ê°™ì´ ì§„í–‰í•˜ë©´ ëª¨ë°”ì¼ ì›¹ì—ì„œ ë¡œê·¸ì¸ ì‹œ ì•±ìœ¼ë¡œ ì—°ê²°ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![](/posts/how-to-use-kakao-login-js-sdk-with-supabase/web-sdk-login.gif)

â• TIP. ì²« ë¡œê·¸ì¸(ì œê³µ ë™ì˜) ì´í›„ ë‹¤ì‹œ ì œê³µ ë™ì˜ ì°½ì„ ë³´ê³  ì‹¶ë‹¤ë©´ **ì¹´ì¹´ì˜¤í†¡ > ì„¤ì • > ì¹´ì¹´ì˜¤ ê³„ì • > ì—°ê²°ëœ ì„œë¹„ìŠ¤ ê´€ë¦¬ì—ì„œ ì—°ê²° ëŠê¸°**ë¥¼ í•˜ë©´ ë©ë‹ˆë‹¤.

**ì•±**ì˜ ê²½ìš° ì €ëŠ” React Native Webviewë¥¼ ì‚¬ìš©í•˜ê³  ìˆê³  ì¶”ê°€ ì„¤ì •ë“¤ì´ í•„ìš”í•©ë‹ˆë‹¤.  
(í™˜ê²½ê³¼ ë²„ì „ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)

> [í•˜ì´ë¸Œë¦¬ë“œ ì•± ê³µì‹ ê°€ì´ë“œ](https://developers.kakao.com/docs/latest/ko/javascript/hybrid)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

originWhitelistì— `intent`ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

```tsx
<WebView
  originWhitelist={['intent']}
```

AndroidManifest.xmlì— ì¹´ì¹´ì˜¤í†¡ì˜ íŒ¨í‚¤ì§€ëª…ì„ ëª…ì‹œí•´ ì¹´ì¹´ì˜¤í†¡ì„ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

```xml:AndroidManifest.xml
<queries>
    <package android:name="com.kakao.talk" />
</queries>
```

ëª¨ë“  ì„¤ì •ì´ ëë‚˜ë©´ ì•±ì—ì„œë„ ì¹´ì¹´ì˜¤ ì•±ì„ í†µí•œ ë¡œê·¸ì¸ì´ ê°€ëŠ¥í•´ ì§€ê³ , ìœ ì €ì—ê²Œ ë” ì¢‹ì€ ê²½í—˜ì„ ì„ ì‚¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- iOSì˜ ê²½ìš° ì¶”ê°€ ì„¤ì •ì—†ì´ ì˜ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í–ˆìœ¼ë‚˜ ì €ëŠ” ì½”ë“œë² ì´ìŠ¤ì— ì´ë¯¸ ì´ê²ƒ ì €ê²ƒ ì„¸íŒ…ì´ ë˜ì–´ìˆëŠ” ìƒíƒœì´ê¸´ í•˜ë‹ˆ ì°¸ê³ í•˜ì„¸ìš”.

## ë!

ëª¨ë“  ë‚´ìš©ì€ [Kakao Developers Portal](https://developers.kakao.com)ì—ì„œ ìì„¸íˆ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì €ë„ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì´ ì£¼ì—…ë¬´ë¼ ì¸ì¦ ì„œë²„ ì½”ë“œëŠ” í™•ì‹ í•  ìˆ˜ ì—†ëŠ” ì  ì–‘í•´ ë¶€íƒë“œë¦½ë‹ˆë‹¤.  
ë§Œì•½ ë‹¤ë¥´ê±°ë‚˜ ì˜ëª»ëœ ë‚´ìš©ì´ ìˆë‹¤ë©´ ì •ì • ë©”ì¼ ë¶€íƒë“œë¦½ë‹ˆë‹¤.

ê°ì‚¬í•©ë‹ˆë‹¤! í™”ì´íŒ…! ğŸ’

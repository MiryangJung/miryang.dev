---
title: remix-rescriptë¡œ rescript ë°”ì¸ë”© ì•Œì•„ë³´ê¸°
date: 2022-06-09
description: ë„ëŒ€ì²´ javascriptì— rescript ë°”ì¸ë”©ì€ ì–´ë–»ê²Œ í•˜ëŠ” ê±¸ê¹Œ?
thumbnailUrl: /posts/thumbnail/learn-about-remix-rescript-binding.jpg
tags: ['remix', 'rescript', 'ë¦¬ìŠ¤í¬ë¦½íŠ¸', 'ë°”ì¸ë”©', 'ë¦¬ë¯¹ìŠ¤']
---

## ğŸ˜ ì™œ ì•Œì•„ë³´ëŠ”ê°€

í˜„ì¬ ì—…ë¬´ì—ì„œ `rescript` ë¥¼ ì‚¬ìš©í•˜ê³ , ì–¼ë§ˆ ì „ì— ë‚˜ì˜¨ í•«í•œ `remix.run` ì„ ì¨ë³´ê³  ì‹¶ì—ˆë‹¤.  
ê·¸ë˜ì„œ ë‘ ê°œ ë‹¤ ì‚¬ìš©í•˜ëŠ” ìŠ¤íƒìœ¼ë¡œ [rescript-remix-blog-template](https://github.com/MiryangJung/rescript-remix-blog-template) ë¼ëŠ” ì›ëŒ€í•œ ê¿ˆì„ ê°€ì§„ ì €ì¥ì†Œë¥¼ ë§Œë“¤ì—ˆë‹¤.  
ì´ë¯¸ ë°”ì¸ë”©ì´ ë˜ì–´ ìˆëŠ” [rescript-remix](https://github.com/tom-sherman/rescript-remix)ë¥¼ ë°œê²¬í•˜ê³ , ê¸°ë»í•˜ê¸°ë„ ì ì‹œ `LoaderFunction` ë¼ëŠ” í•¨ìˆ˜ê°€ í•„ìš”í–ˆëŠ”ë° ë°”ì¸ë”©ì´ ë˜ì–´ìˆì§€ ì•Šì•˜ë‹¤.  
ë°”ì¸ë”©ì´ ëœ ìƒíƒœë¡œ ì˜¬ë¼ì™€ ìˆëŠ” [rescript-remix PR#21](https://github.com/tom-sherman/rescript-remix/pull/21) ì„ ë³´ê³ , ì½”ë©˜íŠ¸ë¥¼ ë‚¨ê²¼ìœ¼ë‚˜ ë©”ì¸í…Œì´ë„ˆê°€ nê°œì›” ì§¸ ì €ì¥ì†Œì— ì°¾ì•„ì˜¤ì§€ ì•Šê³  ìˆë‹¤.

ê·¸ë˜ì„œ **ê·¸ëŸ¼ ë‚´ê°€ í•´ì„œ ì¨ì•¼ì§€ ë­** ë¼ëŠ” ìƒê°ì„ í–ˆìœ¼ë‚˜ ë°”ì¸ë”©ì´ë¼ëŠ” ìš©ì–´ ìì²´ë„ ì²˜ìŒ ë“¤ì–´ë´¤ê¸°ì— [rescript-remix](https://github.com/tom-sherman/rescript-remix) ì½”ë“œë¥¼ ì½ì–´ë³´ë©´ì„œ ì•Œì•„ë³´ê³ ì í•œë‹¤.

> **ì£¼ì˜!** ë°”ì¸ë”©ì— ì™„ì „ ì²˜ìŒì¸ ì‚¬ëŒì´ ë¬´ì‹í•˜ê²Œ ì½ì–´ë³´ë©° ì ëŠ” ê¸€ë¡œ ì´ë¯¸ ì˜ ì•Œê³  ê³„ì‹  ë¶„ì´ ë³´ë©´ ë‹µë‹µí•¨ì„ ëŠë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ¤© ì´ì œ ì•Œì•„ë³´ì

ì¼ë‹¨ [ìë°”ìŠ¤í¬ë¦½íŠ¸ í•¨ìˆ˜ì— ë°”ì¸ë”©í•˜ê¸°](https://green-labs.github.io/rescript-in-korean/JavaScript-Interop/05-Bind-to-JS-Function)ë¥¼ ì½ê³ , ê¸°ì´ˆ ì§€ì‹ì„ ìµí˜”ë‹¤.

[Remix.res](https://github.com/tom-sherman/rescript-remix/blob/main/src/Remix.res) ì— ë°”ì¸ë”© ì½”ë“œê°€ ìˆì—ˆê³ , ë¬´ì—‡ì„ í•œ ê²ƒì¸ì§€ ì•Œì•„ë´¤ë‹¤.  
remix ì €ì¥ì†Œì— ê°€ì„œ ê²€ìƒ‰ì„ í•´ë³´ë‹ˆ [remix-react/magicExports/remix.ts#L21](https://github.com/remix-run/remix/blob/main/packages/remix-react/magicExports/remix.ts#L21) ì—ì„œ exportë˜ê³  ìˆëŠ” ëª¨ë“ˆì„ ë°”ì¸ë”©í•˜ê³  ìˆì—ˆë‹¤.

### ğŸ”¸ RemixBrowser

> ì„œë²„ì—ì„œ ë°›ì€ HTMLì„ hydrateë¥¼ í•˜ë©°, remix app ì§„ì…ì ì´ë‹¤.

- `@react.component` ê°€ ë­˜ê¹Œ?
  - ReScript React componentë¥¼ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ ì œê³µë˜ëŠ” ë°ì½”ë ˆì´í„°
  - [JSX Component Interface](https://rescript-lang.org/docs/react/latest/beyond-jsx#jsx-component-interface)

```reason:rescript-remix/Remix.res
module RemixBrowser = {
  @module("remix") @react.component
  external make: unit => React.element = "RemixBrowser"
}
```

- `RemixBrowser` ì˜ íƒ€ì…ì´ **ReactElement** ì´ë¯€ë¡œ **React.element**ë¡œ ë°”ì¸ë”©
- `make:` ëŠ” @react.component ë°ì½”ë ˆì´í„° ì‚¬ìš©ì„ ìœ„í•¨
- `unit =>` ëŠ” propsê°€ ì—†ê¸° ë•Œë¬¸

```tsx:remix-react/browser.tsx
export function RemixBrowser(_props: RemixBrowserProps): ReactElement {
```

### ğŸ”¸ RemixServer

> HTMLì„ ìƒì„±í•˜ë©°, ì„œë²„ì—ì„œ êµ¬ë™ë˜ëŠ” remix appì˜ ì§„ì…ì 

```reason:rescript-remix/Remix.res
type entryContext

module RemixServer = {
  @module("remix") @react.component
  external make: (~context: entryContext, ~url: string) => React.element = "RemixServer"
}
```

- `entryContext` ê°€ ë­˜ê¹Œ?
  - [EntryContext](https://github.com/remix-run/remix/blob/main/packages/remix-react/entry.ts#L7)
  - `type entryContext` ì ì–´ì¤€ ê²ƒë§Œìœ¼ë¡œ ì–´ë–»ê²Œ import ëœ ê±¸ê¹Œ...?
- propsì˜ urlì˜ íƒ€ì…ì´ **string | URL** ì´ì§€ë§Œ **string** ìœ¼ë¡œë§Œ ë°›ë„ë¡ ë˜ì–´ìˆìŒ

```tsx:remix-react/server.tsx
export interface RemixServerProps {
  context: EntryContext;
  url: string | URL;
}

export function RemixServer({ context, url }: RemixServerProps): ReactElement {
```

### ğŸ”¸ Outlet

> ì¤‘ì²© ë¼ìš°íŒ…ì— ì‚¬ìš© [outlet](https://reactrouter.com/docs/en/v6/components/outlet)

```reason:rescript-remix/Remix.res
module Outlet = {
  @module("remix") @react.component
  external make: (~context: 'a=?) => React.element = "Outlet"
}
```

- react-routerì—ì„œ exportë¨
- **unknown**ì€ **'a=?** ìœ¼ë¡œ ì‚¬ìš©

```tsx:remix-run/react-router
export interface OutletProps {
  context?: unknown;
}

export function Outlet(props: OutletProps): React.ReactElement | null {
  return useOutlet(props.context);
}
```

### ğŸ”¸ LiveReload

> dev ëª¨ë“œì¼ ë•Œ ì½”ë“œ ë³€ê²½ ì‹œ ìë™ ë¦¬ë¡œë“œ

```reason:rescript-remix/Remix.res
module LiveReload = {
  @module("remix") @react.component
  external make: (~port: int=?) => React.element = "LiveReload"
}
```

- [LiveReload](https://github.com/remix-run/remix/blob/main/packages/remix-react/components.tsx#L1363)ê°€ **null | React.element** ì¼ ê±°ë¼ê³  ì˜ˆìƒí–ˆëŠ”ë°
- **React.element** ì¸ ì´ìœ ê°€ ë­˜ê¹Œ?

```tsx:remix-react/components.tsx
export const LiveReload =
  process.env.NODE_ENV !== "development"
    ? () => null
    : function LiveReload({
        port = Number(process.env.REMIX_DEV_SERVER_WS_PORT || 8002),
      }: {port?: number;})
```

### ğŸ”¸ Link

> ì•µì»¤ tag ë Œë”

```reason:rescript-remix/Remix.res
module Link = {
  @module("remix") @react.component
  external make: (
    ~prefetch: [#intent | #render | #none]=?,
    ~to: string,
    ~reloadDocument: bool=?,
    ~replace: bool=?,
    ~state: 'a=?,
    ~children: React.element,
  ) => React.element = "Link"
}
```

- **"intent" | "render" | "none"** ëŠ” **Polymorphic Variant**ë¡œ í‘œí˜„
- forwardRefì´ë¯€ë¡œ **children** props í•„ìš”

```tsx:remix-react/components.tsx
type PrefetchBehavior = "intent" | "render" | "none";

export interface RemixLinkProps extends LinkProps {
  prefetch?: PrefetchBehavior;
}

let Link = React.forwardRef<HTMLAnchorElement, RemixLinkProps>(
```

- Linkê°€ ë°˜í™˜í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ëŠ” `react-router-domì˜ Link`
- **any**ëŠ” **'a=?** ë¡œ í‘œí˜„

```tsx:remix-run/react-router
export interface LinkProps
  extends Omit<React.AnchorHTMLAttributes<HTMLAnchorElement>, "href"> {
  reloadDocument?: boolean;
  replace?: boolean;
  state?: any;
  to: To;
}

export const Link = React.forwardRef<HTMLAnchorElement, LinkProps>(
```

### ğŸ”¸ Form

> ì œì¶œ í›„ ëª¨ë“  í˜ì´ì§€ì˜ loaderê°€ ë¦¬ë¡œë“œë˜ë©° ë°ì´í„°ê°€ ìµœì‹ í™”, form values ìë™ ì§ë ¬í™”

```reason:rescript-remix/Remix.res
module Form = {
  @module("remix") @react.component
  external make: (
    ~method: [#get | #post | #put | #patch | #delete]=?,
    ~action: string=?,
    ~encType: [#"application/x-www-form-urlencoded" | #"multipart/form-data"]=?,
    ~reloadDocument: bool=?,
    ~replace: bool=?,
    ~onSubmit: @uncurry ReactEvent.Form.t => unit=?,
  ) => React.element = "Form"
}
```

- FormMethod, FormEncTypeëŠ” **Polymorphic Variant**ë¡œ í‘œí˜„
- **FormEventHandler** ëŠ” ì™œ **@uncurry** í–ˆì„ê¹Œ?
  - ì˜ˆìƒ: ì•ˆì •ì„±

```tsx:remix-react/components.tsx
export type FormMethod = "get" | "post" | "put" | "patch" | "delete";
export interface FormProps extends FormHTMLAttributes<HTMLFormElement> {
  method?: FormMethod;
  action?: string;
  encType?: FormEncType;
  reloadDocument?: boolean;
  replace?: boolean;
  onSubmit?: React.FormEventHandler<HTMLFormElement>;
}

let Form = React.forwardRef<HTMLFormElement, FormProps>((props, ref) => {
```

### ğŸ”¸ Cookie

```reason:rescript-remix/Remix.res
module Cookie = {
  type t

  @get external name: t => string = "name"
  @get external isSigned: t => bool = "isSigned"
  ...ìƒëµ
}

module CreateCookieOptions = {
  type t

  @obj
  external make: (
    ~decode: string => string=?,
    ~encode: string => string=?,
    ...ìƒëµ
  ) => t = ""
}

@module("remix") external createCookie: string => Cookie.t = "createCookie"
@module("remix")
external createCookieWithOptions: (string, CreateCookieOptions.t) => Cookie.t = "createCookie"
```

- ê°™ì€ ëª¨ë“ˆì„ ë°”ì¸ë”©í•  ë•Œ propsì— ë”°ë¼ ë‹¤ë¥´ê²Œ í•  ìˆ˜ ìˆë‹¤.

```ts:remix-server-runtime/cookies.ts
export interface Cookie {
  readonly name: string;
  readonly isSigned: boolean;
  readonly expires?: Date;
  parse(
    cookieHeader: string | null,
    options?: CookieParseOptions
  ): Promise<any>;
  serialize(value: any, options?: CookieSerializeOptions): Promise<string>;
}

export type CreateCookieFunction = (
  name: string,
  cookieOptions?: CookieOptions
) => Cookie;

export const createCookieFactory =
  ({
    sign,
    unsign,
  }: {
    sign: SignFunction;
    unsign: UnsignFunction;
  }): CreateCookieFunction =>
```

## ğŸ˜° ì—¬ì „íˆ ì–´ë µë‹¤

tsë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë°”ì¸ë”©í•´ë‘” ì½”ë“œë¥¼ ë³´ê³  ì½ì–´ë´¤ì§€ë§Œ ì—¬ì „íˆ ì˜ ëª¨ë¥´ëŠ” ìƒíƒœì´ë‹¤. ã… _ã… 

[rescript-remix/RouteConventions.res](https://github.com/tom-sherman/rescript-remix/blob/main/routing/RouteConventions.res) ì— remixì˜ íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…ì„ ë³€í™˜í•˜ëŠ” ì½”ë“œê°€ ìˆë‹¤.  
ì½ì–´ë´¤ì§€ë§Œ ì§€ê¸ˆì€ ì˜ ëª¨ë¥´ê² ë‹¤. ì–¸ì  ê°€ ì´í•´í•  ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ë‹¤. ğŸ˜‚

ì–¸ì  ê°€ ë°”ì¸ë”©ì„ ë‚´ ì†ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” ë‚ ì´ ì˜¤ê² ì§€...